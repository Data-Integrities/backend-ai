Jul 25 22:03:28 pve1 ai-agent[1426044]: Enhanced HTTP Agent $HOSTNAME-agent listening on port 3080
Jul 25 22:03:28 pve1 ai-agent[1426044]: Hub URL: http://192.168.1.30:3000
Jul 25 22:03:28 pve1 ai-agent[1426044]: Features: Authentication, Service Discovery, Command Parsing, Event Notifications
Jul 25 22:03:28 pve1 ai-agent[1426044]: Failed to notify hub: AxiosError: connect ECONNREFUSED 192.168.1.30:3000
Jul 25 22:03:28 pve1 ai-agent[1426044]:     at AxiosError.from (/opt/ai-agent/agent/node_modules/axios/dist/node/axios.cjs:899:14)
Jul 25 22:03:28 pve1 ai-agent[1426044]:     at RedirectableRequest.handleRequestError (/opt/ai-agent/agent/node_modules/axios/dist/node/axios.cjs:3228:25)
Jul 25 22:03:28 pve1 ai-agent[1426044]:     at RedirectableRequest.emit (node:events:517:28)
Jul 25 22:03:28 pve1 ai-agent[1426044]:     at eventHandlers.<computed> (/opt/ai-agent/agent/node_modules/follow-redirects/index.js:49:24)
Jul 25 22:03:28 pve1 ai-agent[1426044]:     at ClientRequest.emit (node:events:517:28)
Jul 25 22:03:28 pve1 ai-agent[1426044]:     at Socket.socketErrorListener (node:_http_client:501:9)
Jul 25 22:03:28 pve1 ai-agent[1426044]:     at Socket.emit (node:events:517:28)
Jul 25 22:03:28 pve1 ai-agent[1426044]:     at emitErrorNT (node:internal/streams/destroy:151:8)
Jul 25 22:03:28 pve1 ai-agent[1426044]:     at emitErrorCloseNT (node:internal/streams/destroy:116:3)
Jul 25 22:03:28 pve1 ai-agent[1426044]:     at process.processTicksAndRejections (node:internal/process/task_queues:82:21)
Jul 25 22:03:28 pve1 ai-agent[1426044]:     at Axios.request (/opt/ai-agent/agent/node_modules/axios/dist/node/axios.cjs:4317:41)
Jul 25 22:03:28 pve1 ai-agent[1426044]:     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
Jul 25 22:03:28 pve1 ai-agent[1426044]:     at async notifyHub (/opt/ai-agent/agent/dist/api/index.js:477:9)
Jul 25 22:03:28 pve1 ai-agent[1426044]:     at async Server.<anonymous> (/opt/ai-agent/agent/dist/api/index.js:531:9) {
Jul 25 22:03:28 pve1 ai-agent[1426044]:   port: 3000,
Jul 25 22:03:28 pve1 ai-agent[1426044]:   address: '192.168.1.30',
Jul 25 22:03:28 pve1 ai-agent[1426044]:   syscall: 'connect',
Jul 25 22:03:28 pve1 ai-agent[1426044]:   code: 'ECONNREFUSED',
Jul 25 22:03:28 pve1 ai-agent[1426044]:   errno: -111,
Jul 25 22:03:28 pve1 ai-agent[1426044]:   config: {
Jul 25 22:03:28 pve1 ai-agent[1426044]:     transitional: {
Jul 25 22:03:28 pve1 ai-agent[1426044]:       silentJSONParsing: true,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       forcedJSONParsing: true,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       clarifyTimeoutError: false
Jul 25 22:03:28 pve1 ai-agent[1426044]:     },
Jul 25 22:03:28 pve1 ai-agent[1426044]:     adapter: [ 'xhr', 'http', 'fetch' ],
Jul 25 22:03:28 pve1 ai-agent[1426044]:     transformRequest: [ [Function: transformRequest] ],
Jul 25 22:03:28 pve1 ai-agent[1426044]:     transformResponse: [ [Function: transformResponse] ],
Jul 25 22:03:28 pve1 ai-agent[1426044]:     timeout: 0,
Jul 25 22:03:28 pve1 ai-agent[1426044]:     xsrfCookieName: 'XSRF-TOKEN',
Jul 25 22:03:28 pve1 ai-agent[1426044]:     xsrfHeaderName: 'X-XSRF-TOKEN',
Jul 25 22:03:28 pve1 ai-agent[1426044]:     maxContentLength: -1,
Jul 25 22:03:28 pve1 ai-agent[1426044]:     maxBodyLength: -1,
Jul 25 22:03:28 pve1 ai-agent[1426044]:     env: { FormData: [Function [FormData]], Blob: [class Blob] },
Jul 25 22:03:28 pve1 ai-agent[1426044]:     validateStatus: [Function: validateStatus],
Jul 25 22:03:28 pve1 ai-agent[1426044]:     headers: Object [AxiosHeaders] {
Jul 25 22:03:28 pve1 ai-agent[1426044]:       Accept: 'application/json, text/plain, */*',
Jul 25 22:03:28 pve1 ai-agent[1426044]:       'Content-Type': 'application/json',
Jul 25 22:03:28 pve1 ai-agent[1426044]:       'User-Agent': 'axios/1.11.0',
Jul 25 22:03:28 pve1 ai-agent[1426044]:       'Content-Length': '112',
Jul 25 22:03:28 pve1 ai-agent[1426044]:       'Accept-Encoding': 'gzip, compress, deflate, br'
Jul 25 22:03:28 pve1 ai-agent[1426044]:     },
Jul 25 22:03:28 pve1 ai-agent[1426044]:     method: 'post',
Jul 25 22:03:28 pve1 ai-agent[1426044]:     url: 'http://192.168.1.30:3000/api/notifications',
Jul 25 22:03:28 pve1 ai-agent[1426044]:     data: '{"type":"agent-online","agentId":"$HOSTNAME-agent","timestamp":"2025-07-26T03:03:28.869Z","capabilities":"full"}',
Jul 25 22:03:28 pve1 ai-agent[1426044]:     allowAbsoluteUrls: true
Jul 25 22:03:28 pve1 ai-agent[1426044]:   },
Jul 25 22:03:28 pve1 ai-agent[1426044]:   request: <ref *1> Writable {
Jul 25 22:03:28 pve1 ai-agent[1426044]:     _writableState: WritableState {
Jul 25 22:03:28 pve1 ai-agent[1426044]:       objectMode: false,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       highWaterMark: 16384,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       finalCalled: false,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       needDrain: false,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       ending: false,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       ended: false,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       finished: false,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       destroyed: false,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       decodeStrings: true,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       defaultEncoding: 'utf8',
Jul 25 22:03:28 pve1 ai-agent[1426044]:       length: 0,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       writing: false,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       corked: 0,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       sync: true,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       bufferProcessing: false,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       onwrite: [Function: bound onwrite],
Jul 25 22:03:28 pve1 ai-agent[1426044]:       writecb: null,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       writelen: 0,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       afterWriteTickInfo: null,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       buffered: [],
Jul 25 22:03:28 pve1 ai-agent[1426044]:       bufferedIndex: 0,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       allBuffers: true,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       allNoop: true,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       pendingcb: 0,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       constructed: true,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       prefinished: false,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       errorEmitted: false,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       emitClose: true,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       autoDestroy: true,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       errored: null,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       closed: false,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       closeEmitted: false,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       [Symbol(kOnFinished)]: []
Jul 25 22:03:28 pve1 ai-agent[1426044]:     },
Jul 25 22:03:28 pve1 ai-agent[1426044]:     _events: [Object: null prototype] {
Jul 25 22:03:28 pve1 ai-agent[1426044]:       response: [Function: handleResponse],
Jul 25 22:03:28 pve1 ai-agent[1426044]:       error: [Function: handleRequestError],
Jul 25 22:03:28 pve1 ai-agent[1426044]:       socket: [Function: handleRequestSocket]
Jul 25 22:03:28 pve1 ai-agent[1426044]:     },
Jul 25 22:03:28 pve1 ai-agent[1426044]:     _eventsCount: 3,
Jul 25 22:03:28 pve1 ai-agent[1426044]:     _maxListeners: undefined,
Jul 25 22:03:28 pve1 ai-agent[1426044]:     _options: {
Jul 25 22:03:28 pve1 ai-agent[1426044]:       maxRedirects: 21,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       maxBodyLength: Infinity,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       protocol: 'http:',
Jul 25 22:03:28 pve1 ai-agent[1426044]:       path: '/api/notifications',
Jul 25 22:03:28 pve1 ai-agent[1426044]:       method: 'POST',
Jul 25 22:03:28 pve1 ai-agent[1426044]:       headers: [Object: null prototype],
Jul 25 22:03:28 pve1 ai-agent[1426044]:       agents: [Object],
Jul 25 22:03:28 pve1 ai-agent[1426044]:       auth: undefined,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       family: undefined,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       beforeRedirect: [Function: dispatchBeforeRedirect],
Jul 25 22:03:28 pve1 ai-agent[1426044]:       beforeRedirects: [Object],
Jul 25 22:03:28 pve1 ai-agent[1426044]:       hostname: '192.168.1.30',
Jul 25 22:03:28 pve1 ai-agent[1426044]:       port: '3000',
Jul 25 22:03:28 pve1 ai-agent[1426044]:       agent: undefined,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       nativeProtocols: [Object],
Jul 25 22:03:28 pve1 ai-agent[1426044]:       pathname: '/api/notifications'
Jul 25 22:03:28 pve1 ai-agent[1426044]:     },
Jul 25 22:03:28 pve1 ai-agent[1426044]:     _ended: false,
Jul 25 22:03:28 pve1 ai-agent[1426044]:     _ending: true,
Jul 25 22:03:28 pve1 ai-agent[1426044]:     _redirectCount: 0,
Jul 25 22:03:28 pve1 ai-agent[1426044]:     _redirects: [],
Jul 25 22:03:28 pve1 ai-agent[1426044]:     _requestBodyLength: 112,
Jul 25 22:03:28 pve1 ai-agent[1426044]:     _requestBodyBuffers: [ [Object] ],
Jul 25 22:03:28 pve1 ai-agent[1426044]:     _onNativeResponse: [Function (anonymous)],
Jul 25 22:03:28 pve1 ai-agent[1426044]:     _currentRequest: ClientRequest {
Jul 25 22:03:28 pve1 ai-agent[1426044]:       _events: [Object: null prototype],
Jul 25 22:03:28 pve1 ai-agent[1426044]:       _eventsCount: 7,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       _maxListeners: undefined,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       outputData: [],
Jul 25 22:03:28 pve1 ai-agent[1426044]:       outputSize: 0,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       writable: true,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       destroyed: false,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       _last: true,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       chunkedEncoding: false,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       shouldKeepAlive: false,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       maxRequestsOnConnectionReached: false,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       _defaultKeepAlive: true,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       useChunkedEncodingByDefault: true,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       sendDate: false,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       _removedConnection: false,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       _removedContLen: false,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       _removedTE: false,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       strictContentLength: false,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       _contentLength: '112',
Jul 25 22:03:28 pve1 ai-agent[1426044]:       _hasBody: true,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       _trailer: '',
Jul 25 22:03:28 pve1 ai-agent[1426044]:       finished: false,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       _headerSent: true,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       _closed: false,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       socket: [Socket],
Jul 25 22:03:28 pve1 ai-agent[1426044]:       _header: 'POST /api/notifications HTTP/1.1\r\n' +
Jul 25 22:03:28 pve1 ai-agent[1426044]:         'Accept: application/json, text/plain, */*\r\n' +
Jul 25 22:03:28 pve1 ai-agent[1426044]:         'Content-Type: application/json\r\n' +
Jul 25 22:03:28 pve1 ai-agent[1426044]:         'User-Agent: axios/1.11.0\r\n' +
Jul 25 22:03:28 pve1 ai-agent[1426044]:         'Content-Length: 112\r\n' +
Jul 25 22:03:28 pve1 ai-agent[1426044]:         'Accept-Encoding: gzip, compress, deflate, br\r\n' +
Jul 25 22:03:28 pve1 ai-agent[1426044]:         'Host: 192.168.1.30:3000\r\n' +
Jul 25 22:03:28 pve1 ai-agent[1426044]:         'Connection: close\r\n' +
Jul 25 22:03:28 pve1 ai-agent[1426044]:         '\r\n',
Jul 25 22:03:28 pve1 ai-agent[1426044]:       _keepAliveTimeout: 0,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       _onPendingData: [Function: nop],
Jul 25 22:03:28 pve1 ai-agent[1426044]:       agent: [Agent],
Jul 25 22:03:28 pve1 ai-agent[1426044]:       socketPath: undefined,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       method: 'POST',
Jul 25 22:03:28 pve1 ai-agent[1426044]:       maxHeaderSize: undefined,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       insecureHTTPParser: undefined,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       joinDuplicateHeaders: undefined,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       path: '/api/notifications',
Jul 25 22:03:28 pve1 ai-agent[1426044]:       _ended: false,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       res: null,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       aborted: false,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       timeoutCb: null,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       upgradeOrConnect: false,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       parser: null,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       maxHeadersCount: null,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       reusedSocket: false,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       host: '192.168.1.30',
Jul 25 22:03:28 pve1 ai-agent[1426044]:       protocol: 'http:',
Jul 25 22:03:28 pve1 ai-agent[1426044]:       _redirectable: [Circular *1],
Jul 25 22:03:28 pve1 ai-agent[1426044]:       [Symbol(kCapture)]: false,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       [Symbol(kBytesWritten)]: 0,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       [Symbol(kNeedDrain)]: false,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       [Symbol(corked)]: 0,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       [Symbol(kOutHeaders)]: [Object: null prototype],
Jul 25 22:03:28 pve1 ai-agent[1426044]:       [Symbol(errored)]: null,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       [Symbol(kHighWaterMark)]: 16384,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       [Symbol(kRejectNonStandardBodyWrites)]: false,
Jul 25 22:03:28 pve1 ai-agent[1426044]:       [Symbol(kUniqueHeaders)]: null
Jul 25 22:03:28 pve1 ai-agent[1426044]:     },
Jul 25 22:03:28 pve1 ai-agent[1426044]:     _currentUrl: 'http://192.168.1.30:3000/api/notifications',
Jul 25 22:03:28 pve1 ai-agent[1426044]:     [Symbol(kCapture)]: false
Jul 25 22:03:28 pve1 ai-agent[1426044]:   },
Jul 25 22:03:28 pve1 ai-agent[1426044]:   cause: Error: connect ECONNREFUSED 192.168.1.30:3000
Jul 25 22:03:28 pve1 ai-agent[1426044]:       at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1549:16) {
Jul 25 22:03:28 pve1 ai-agent[1426044]:     errno: -111,
Jul 25 22:03:28 pve1 ai-agent[1426044]:     code: 'ECONNREFUSED',
Jul 25 22:03:28 pve1 ai-agent[1426044]:     syscall: 'connect',
Jul 25 22:03:28 pve1 ai-agent[1426044]:     address: '192.168.1.30',
Jul 25 22:03:28 pve1 ai-agent[1426044]:     port: 3000
Jul 25 22:03:28 pve1 ai-agent[1426044]:   }
Jul 25 22:03:28 pve1 ai-agent[1426044]: }
